{% extends "base.html" %}

{% block title %}Prédiction - Drug Classification{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-brain"></i> Prédiction de Médicament
            </div>
            <div class="card-body">
                <p class="text-muted">
                    Remplissez les informations du patient pour obtenir une prédiction
                </p>
                
                <form method="POST" action="{{ url_for('predict') }}">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="age" class="form-label">
                                <i class="fas fa-birthday-cake"></i> Âge
                            </label>
                            <input type="number" class="form-control" id="age" name="age" 
                                   min="0" max="100" required value="45">
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="sex" class="form-label">
                                <i class="fas fa-venus-mars"></i> Sexe
                            </label>
                            <select class="form-select" id="sex" name="sex" required>
                                <option value="M">Homme (M)</option>
                                <option value="F">Femme (F)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="bp" class="form-label">
                                <i class="fas fa-heartbeat"></i> Pression Artérielle
                            </label>
                            <select class="form-select" id="bp" name="bp" required>
                                <option value="HIGH">Haute (HIGH)</option>
                                <option value="NORMAL" selected>Normale (NORMAL)</option>
                                <option value="LOW">Basse (LOW)</option>
                            </select>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="cholesterol" class="form-label">
                                <i class="fas fa-flask"></i> Cholestérol
                            </label>
                            <select class="form-select" id="cholesterol" name="cholesterol" required>
                                <option value="HIGH">Élevé (HIGH)</option>
                                <option value="NORMAL" selected>Normal (NORMAL)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="na_to_k" class="form-label">
                            <i class="fas fa-vial"></i> Ratio Na/K (Sodium/Potassium)
                        </label>
                        <input type="number" step="0.1" class="form-control" id="na_to_k" 
                               name="na_to_k" min="0" required value="15.5">
                        <div class="form-text">Valeur typique entre 5 et 40</div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg w-100">
                        <i class="fas fa-brain"></i> Prédire le Médicament
                    </button>
                </form>
            </div>
        </div>

        {% if result %}
        <div class="result-box">
            <h3 class="text-center mb-3">
                <i class="fas fa-check-circle"></i> Résultat de la Prédiction
            </h3>
            <div class="result-drug">
                {{ result.prediction }}
            </div>
            <p class="text-center mb-4">Médicament recommandé pour ce patient</p>
            
            <div class="card bg-white text-dark">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-user"></i> Données Patient
                    </h5>
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Âge:</strong> {{ patient_data.Age }} ans</p>
                            <p><strong>Sexe:</strong> {{ patient_data.Sex }}</p>
                            <p><strong>Pression Art.:</strong> {{ patient_data.BP }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Cholestérol:</strong> {{ patient_data.Cholesterol }}</p>
                            <p><strong>Ratio Na/K:</strong> {{ patient_data.Na_to_K }}</p>
                            <p><strong>Statut:</strong> <span class="text-success">✓ {{ result.status }}</span></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-4">
                <a href="{{ url_for('predict') }}" class="btn btn-light btn-lg">
                    <i class="fas fa-redo"></i> Nouvelle Prédiction
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<!-- Exemples de cas -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-lightbulb"></i> Exemples de Cas
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>Cas 1: Patient Jeune</h6>
                        <small class="text-muted">
                            Âge: 25, Sexe: F, BP: NORMAL, Cholesterol: NORMAL, Na/K: 10.5
                        </small>
                    </div>
                    <div class="col-md-4">
                        <h6>Cas 2: Hypertension</h6>
                        <small class="text-muted">
                            Âge: 55, Sexe: M, BP: HIGH, Cholesterol: HIGH, Na/K: 20.0
                        </small>
                    </div>
                    <div class="col-md-4">
                        <h6>Cas 3: Senior</h6>
                        <small class="text-muted">
                            Âge: 70, Sexe: M, BP: LOW, Cholesterol: NORMAL, Na/K: 25.0
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
